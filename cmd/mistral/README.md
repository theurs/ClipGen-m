# Mistral CLI Utility (ClipGen-m)

–£–º–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API Mistral AI —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É Windows.
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Å–≤—è–∑–∫–µ —Å ClipGen-m, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–π–ø—ã (pipes), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤ (–∫–∞—Ä—Ç–∏–Ω–∫–∏, PDF, –∞—É–¥–∏–æ).

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Vision), PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (OCR) –∏ –∞—É–¥–∏–æ (Whisper-like transcription).
*   **–£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –£—Ç–∏–ª–∏—Ç–∞ —Å–∞–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é –º–æ–¥–µ–ª—å (`mistral-large`, `codestral`, `pixtral` –∏ —Ç.–¥.) –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞.
*   **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (Fallback)**:
    *   –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ–≤–∞–ª–∏–¥–µ–Ω, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∏–∑ —Å–ø–∏—Å–∫–∞.
    *   –ï—Å–ª–∏ API –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω (–æ—à–∏–±–∫–∏ 429/500), –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –ø–æ –∫–∞—á–µ—Å—Ç–≤—É –º–æ–¥–µ–ª—å (Large -> Medium -> Small).
*   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Windows**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (CP866, CP1251 -> UTF-8), —á—Ç–æ–±—ã –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –Ω–µ –ª–æ–º–∞–ª–∞—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏.
*   **JSON Mode**: –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –≤ JSON –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ Markdown-–æ–±–µ—Ä—Ç–æ–∫ (```json).
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ó–∞–ø–∏—Å—å –æ—à–∏–±–æ–∫ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –°–±–æ—Ä–∫–∞

–î–ª—è —Å–±–æ—Ä–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [Go](https://go.dev/dl/).

1. **–°–∫–∞—á–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   –£—Ç–∏–ª–∏—Ç–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ Windows.
   ```bash
   go get golang.org/x/text/encoding/charmap
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**:
   –ù–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   ```bash
   go build -o mistral.exe ./cmd/mistral
   ```

–¢–µ–ø–µ—Ä—å —Ñ–∞–π–ª `mistral.exe` –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á (–ø–æ–ª—É—á–∏—Ç—å –º–æ–∂–Ω–æ –Ω–∞ [console.mistral.ai](https://console.mistral.ai/)).

**–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á:**
```powershell
mistral.exe -save-key –í–∞—à_API_–ö–ª—é—á
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ –ø—É—Ç–∏ `%AppData%\clipgen-m\mistral.conf`. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π (–¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏).

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ—Å—Ç–æ–π —á–∞—Ç (–¢–µ–∫—Å—Ç)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–π–ø—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–æ–ø—Ä–æ—Å–∞.
```powershell
echo "–†–∞—Å—Å–∫–∞–∂–∏ –∫—Ä–∞—Ç–∫–æ –∏—Å—Ç–æ—Ä–∏—é –†–∏–º—Å–∫–æ–π –∏–º–ø–µ—Ä–∏–∏" | mistral.exe
```

### 2. –†–∞–±–æ—Ç–∞ —Å –∫–æ–¥–æ–º
–ï—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –µ—Å—Ç—å —Å–ª–æ–≤–∞ "–∫–æ–¥", "—Ñ—É–Ω–∫—Ü–∏—è" –∏–ª–∏ "json", —É—Ç–∏–ª–∏—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –º–æ–¥–µ–ª—å `codestral` –∏–ª–∏ `mistral-code`.
```powershell
echo "–ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ Go –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø—É–∑—ã—Ä—å–∫–æ–º" | mistral.exe -j
```
*–§–ª–∞–≥ `-j` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–π JSON –∫–æ–¥ (–µ—Å–ª–∏ –≤—ã –ø—Ä–æ—Å–∏–ª–∏ JSON).*

### 3. –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Vision)
–ü–µ—Ä–µ–¥–∞–π—Ç–µ –ø—É—Ç—å –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `-f`. –£—Ç–∏–ª–∏—Ç–∞ –∑–∞–∫–æ–¥–∏—Ä—É–µ—Ç –µ—ë –≤ Base64 –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤ –º–æ–¥–µ–ª—å `pixtral` –∏–ª–∏ `mistral-large`.
```cmd
echo "–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ? –û–ø–∏—à–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å." | mistral.exe -f "C:\Screenshots\app_error.png"
```

### 4. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR)
Mistral –∏–º–µ–µ—Ç –º–æ—â–Ω—ã–π –¥–≤–∏–∂–æ–∫ OCR, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç PDF –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ª—É—á—à–µ, —á–µ–º –æ–±—ã—á–Ω—ã–µ Vision –º–æ–¥–µ–ª–∏.
```powershell
mistral.exe -m ocr -f "C:\Docs\contract.pdf"
```
*–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –¥–ª—è OCR —Ä–µ–∂–∏–º —á–∞—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é `.pdf`, –Ω–æ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `-m ocr`.*

### 5. –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ
–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ –≤ —Ç–µ–∫—Å—Ç.
```powershell
echo "–≤ –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏, –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–∏–ø–∞ –≤–æ—Ç —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏" | mistral.exe -f "C:\Voice\meeting_notes.mp3"
```

### 6. –ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞, —á—Ç–æ–±—ã –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–∞—à–ª–∞ –æ—à–∏–±–∫—É.
```powershell
echo "–ù–∞–π–¥–∏ –æ—à–∏–±–∫—É –≤ –ª–æ–≥–∏–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏" | mistral.exe -f "main.go" -f "auth.go" -f "config.json"
```

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
| :--- | :--- | :--- |
| `-f` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É. –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ, PDF –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã. | `-f "image.png" -f "code.py"` |
| `-s` | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Ä–æ–ª—å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: "You are a helpful assistant". | `-s "–¢—ã —Å—Ç–∞—Ä—à–∏–π Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫"` |
| `-j` | JSON —Ä–µ–∂–∏–º. –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª—è–µ—Ç Markdown —Ç–µ–≥–∏ –∏–∑ –æ—Ç–≤–µ—Ç–∞. | `-j` |
| `-m` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã. –í–∞—Ä–∏–∞–Ω—Ç—ã: `auto` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `code`, `ocr`, `audio`, `vision`. | `-m code` |
| `-t` | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å) –æ—Ç 0.0 –¥–æ 1.0. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.7`. | `-t 0.2` (–¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ –∫–æ–¥–∞) |
| `-v` | Verbose. –í—ã–≤–æ–¥ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å (stderr). | `-v` |
| `-save-key`| –°–æ—Ö—Ä–∞–Ω–∏—Ç—å API –∫–ª—é—á –≤ –∫–æ–Ω—Ñ–∏–≥ –∏ –≤—ã–π—Ç–∏. | `-save-key secret_...` |

## üß† –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã (–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º)

### –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (Router)
–£—Ç–∏–ª–∏—Ç–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∏ –¥–∞—Ç—å –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

1.  **Audio —Ñ–∞–π–ª** ‚Üí `voxtral-mini-latest`
2.  **PDF —Ñ–∞–π–ª** ‚Üí `mistral-ocr-latest`
3.  **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚Üí `pixtral-12b` –∏–ª–∏ `mistral-large`
4.  **–¢–µ–∫—Å—Ç –ø—Ä–æ –∫–æ–¥** ‚Üí `codestral` / `devstral`
5.  **–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç** ‚Üí –¶–µ–ø–æ—á–∫–∞ General –º–æ–¥–µ–ª–µ–π.

### –¶–µ–ø–æ—á–∫–∞ Fallback
–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è, —É—Ç–∏–ª–∏—Ç–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç —Å—Ä–∞–∑—É:
1.  **–û—à–∏–±–∫–∞ 401 (Auth)**: –ö–ª—é—á –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –±–∏—Ç—ã–π, –±–µ—Ä–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞.
2.  **–û—à–∏–±–∫–∞ 429 (Rate Limit)**:
    *   –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —Å–º–µ–Ω–∏—Ç—å –∫–ª—é—á (–æ–±—Ö–æ–¥ –ª–∏–º–∏—Ç–æ–≤ –∞–∫–∫–∞—É–Ω—Ç–∞).
    *   –ï—Å–ª–∏ –∫–ª—é—á–∏ –∫–æ–Ω—á–∏–ª–∏—Å—å, –ø–æ–Ω–∏–∂–∞–µ–º –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏: `Large` ‚Üí `Medium` ‚Üí `Small`.

## üìÅ –õ–æ–≥–∏ –∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `%AppData%\clipgen-m\`:

*   **mistral.conf**: JSON-—Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏.
*   **err.log**: –õ–æ–≥ —Ñ–∞–π–ª. –°—é–¥–∞ –ø–∏—à—É—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Ç—Ä–∞—è—Ö (—Å –º–µ—Ç–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏). –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª.
